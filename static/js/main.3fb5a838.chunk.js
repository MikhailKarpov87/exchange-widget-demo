(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{100:function(e,r,n){"use strict";n.r(r);var t=n(5),a=n(0),c=n.n(a),s=n(7),o=n.n(s),u=n(27),i=n(22),l=n(29),d=n(30),b=n(47),y=n(46),p=n(20),h=n(28),C=n.n(h),m=n(48),x=n(61),j=n.n(x),v=[{name:"EUR",symbol:"\u20ac"},{name:"GBP",symbol:"\xa3"},{name:"USD",symbol:"$"}],f=function(){function e(r){var n=this;Object(l.a)(this,e),this.subscribe=function(e,r){n.baseCurrency=e,Object(m.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._getRates();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))(),n.intervalId=setInterval(Object(m.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._getRates();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),n.updateInterval)},this.responseHasRates=function(e){var r=v.filter((function(e){return e.name!==n.baseCurrency}));return e&&e.data&&e.data.rates&&r.every((function(r){return e.data.rates[r.name]}))&&e.data.base===n.baseCurrency},this._getRates=Object(m.a)(C.a.mark((function e(){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("".concat("https://api.exchangeratesapi.io/latest","?base=").concat(n.baseCurrency));case 3:r=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),p.b.error(n.errorMessage),clearInterval(n.intervalId);case 10:return e.abrupt("return",n.responseHasRates(r)?r.data.rates:new Error(n.errorMessage));case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),this.updateInterval=r.updateInterval,this.errorMessage="Can't get rates :("}return Object(d.a)(e,[{key:"unsubscribe",value:function(){clearInterval(this.intervalId)}}]),e}(),g=function(e){return!e||/^(\d+)((\.)(\d{1,2})?)?$/.test(e)&&Number(e)<1e10},O=function(e){return e.replace(/^0+(\d)/,"$1")},k=function(e,r,n){return Number(e.baseCurrency)<=r[n.name]},N=n(138),V=n(133),S=n(140),q=n(141),T={primaryColor:"#e7fafe",secondaryColor:"#8cbffa",backgroundTop:"#1f54c3",backgroundMiddle:"#022d88",backgroundBottom:"#4a7fee",secondCardColor:"#2854ac"},I={root:{color:T.primaryColor,"& *":{color:T.primaryColor,borderColor:T.primaryColor},"& div":{width:"1em",margin:0}},input:{padding:"12px 6px",fontSize:"1.7em","& *":{color:T.primaryColor+" !important"}}},E={selectContainer:{margin:"1em","& svg":{color:T.primaryColor}},inputLabel:{color:T.primaryColor},panelText:{color:T.secondaryColor,display:"flex",fontSize:"0.75em",justifyContent:"space-between",margin:"2em 0"}},R=n(101),F=Object(R.a)(I)(N.a),w=Object(R.a)(E)((function(e){var r=e.currencyType,n=e.value,a=e.currency,c=a.name,s=a.symbol,o=e.pocketValue,u=e.handleValueChange,i=e.currencyRateText,l=e.classes,d=e.handleFocus,b=e.handleBlur;return Object(t.jsxs)("div",{children:[Object(t.jsxs)(V.a,{variant:"outlined",children:[Object(t.jsx)(S.a,{htmlFor:"".concat(r,"-input"),className:l.inputLabel,children:c}),Object(t.jsx)(F,{onFocus:d,onBlur:b,id:"".concat(r,"-input"),"data-testid":"".concat(r,"-input"),value:n||"",onChange:function(e){return u(e.target.value)},startAdornment:Object(t.jsxs)(q.a,{position:"start",children:["baseCurrency"===r?"-":"+"," "]}),endAdornment:Object(t.jsx)(q.a,{position:"end",children:s}),labelWidth:30})]}),Object(t.jsxs)("div",{className:l.panelText,children:[Object(t.jsxs)("span",{"data-testid":"pocket-text",children:["You have ","".concat(s).concat(o)]}),Object(t.jsx)("span",{"data-testid":"inverse-rate-text",children:i})]})]})})),B=(n(98),n(135)),L=n(136),M={appContainer:{display:"flex",flexDirection:"column",alignItems:"center",color:T.primaryColor,fontSize:"1.2em",minWidth:"375px"},sideButton:{root:{color:T.primaryColor,"&:disabled":{color:T.secondaryColor}}},topPanel:{background:"linear-gradient(".concat(T.backgroundBottom,", ").concat(T.backgroundTop,")"),padding:"2em 0"},bottomPanel:{background:"linear-gradient(".concat(T.backgroundMiddle,", ").concat(T.backgroundTop,")"),padding:"2em 0"},buttonContainer:{display:"flex",justifyContent:"center",paddingTop:"1em"}},P=n(134),A=Object(R.a)(M.sideButton)(P.a),z=function(e){return function(r){Object(b.a)(a,r);var n=Object(y.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,t=new Array(r),c=0;c<r;c++)t[c]=arguments[c];return(e=n.call.apply(n,[this].concat(t))).getNextCurrencyName=function(r){var n=e.getCurrencyIndex(),t=e.props.currenciesList[n+r];return t?e.isEqualCurrencies(t)?e.getNextCurrencyName(r+r):t.name:null},e.getCurrencyIndex=function(){var r=e.props,n=r.currenciesList,t=r.currencyType,a=e.props[t];return n.findIndex((function(e){var r=e.name;return a&&a.name?a.name===r:null}))},e.getRelatedCurrency=function(){var r=e.props,n=r.currencyType,t=r.baseCurrency,a=r.quoteCurrency;return"baseCurrency"===n?a:t},e.isEqualCurrencies=function(r){return e.getRelatedCurrency(r).name===r.name},e}return Object(d.a)(a,[{key:"render",value:function(){var r=this.props,n=r.currencyType,a=r.handleSelectCurrency,c=this.props[n],s=this.getNextCurrencyName(1),o=this.getNextCurrencyName(-1);return Object(t.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(t.jsx)(A,{id:"previous-currency","data-testid":"previous-currency",style:{alignSelf:"stretch"},onClick:function(){return a(n,o)},disabled:!o,children:Object(t.jsx)(B.a,{})}),Object(t.jsx)(e,Object(i.a)(Object(i.a)({},this.props),{},{currency:c})),Object(t.jsx)(A,{id:"next-currency","data-testid":"next-currency",style:{alignSelf:"stretch"},onClick:function(){return a(n,s)},disabled:!s,children:Object(t.jsx)(L.a,{})})]})}}]),a}(a.Component)},D=n(137),H=n(142),U={root:{color:T.primaryColor,border:"1px solid ".concat(T.secondaryColor),padding:"2px 12px","&:focus":{color:T.primaryColor,border:"1px solid ".concat(T.secondaryColor),borderRadius:"4px"}}},W={selectContainer:{margin:"1em","& svg":{color:T.primaryColor}}},$=Object(R.a)(U)(D.a),_=Object(R.a)(W)((function(e){var r=e.options,n=e.handleSelectCurrency,a=e.value,c=e.classes;return Object(t.jsx)("div",{className:c.selectContainer,children:Object(t.jsx)(V.a,{variant:"outlined",children:Object(t.jsx)($,{id:"currency-select","data-testid":"currency-select",value:a,onChange:function(e){return n("quoteCurrency",e.target.value)},children:r.map((function(e){var r=e.id,n=e.name;return Object(t.jsx)(H.a,{value:r,children:n},r)}))})})})})),J=function(e){var r=e.handleButtonClick,n=e.disabled;return Object(t.jsx)(P.a,{onClick:r,disabled:n,color:"primary",variant:"contained","data-testid":"exchange-button",children:"Exchange"})},G=z(w),Y=v.reduce((function(e,r){return e[r.name]=50,e}),{}),K=function(e){Object(b.a)(n,e);var r=Object(y.a)(n);function n(){var e;Object(l.a)(this,n);for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return(e=r.call.apply(r,[this].concat(a))).state={baseCurrency:v[0],quoteCurrency:v[1],selectedCurrencyType:"baseCurrency",pockets:Y,exchangeValues:{baseCurrency:"",quoteCurrency:""},rates:{}},e.subscribeForRates=function(r){e.ratesLoader&&e.ratesLoader.unsubscribe(),e.ratesLoader.subscribe(r.name,(function(r){var n=e.state.exchangeValues;e.setState({rates:r,exchangeValues:e.calcExchangeValues(r,n)})}))},e.calcExchangeValues=function(r,n){var t=e.state,a=t.quoteCurrency,c=t.selectedCurrencyType;if(""===n[c])return{baseCurrency:"",quoteCurrency:""};var s=r[a.name],o="baseCurrency"===c,u=o?(Number(n.baseCurrency)*s).toFixed(2):n.quoteCurrency;return{baseCurrency:o?n.baseCurrency:(Number(n.quoteCurrency)/s).toFixed(2),quoteCurrency:u}},e.handleValueChange=function(r){var n=e.state,t=n.rates,a=n.selectedCurrencyType,c=n.exchangeValues;if(g(r)){var s=O(r),o=Object(i.a)(Object(i.a)({},c),{},Object(u.a)({},a,s)),l=e.calcExchangeValues(t,o);e.setState({exchangeValues:l})}},e.makeExchange=function(){var r,n=e.state,t=n.baseCurrency,a=n.quoteCurrency,c=n.exchangeValues,s=n.pockets;if(c.baseCurrency<=0)p.b.error("Enter valid value!");else if(k(c,s,t)){var o=(r={},Object(u.a)(r,t.name,(Number(s[t.name])-Number(c.baseCurrency)).toFixed(2)),Object(u.a)(r,a.name,(Number(s[a.name])+Number(c.quoteCurrency)).toFixed(2)),r);e.setState({pockets:Object(i.a)(Object(i.a)({},s),o)},e.clearValues()),p.b.success("Exchange done!")}else{var l="".concat(t.symbol).concat(s[t.name]);p.b.error("Not enough funds (".concat(l," available)!"))}},e.createInverseExchangeRateText=function(){var r=e.state,n=r.rates,t=r.baseCurrency,a=r.quoteCurrency,c=Number(1/n[a.name]).toFixed(2);return"".concat(a.symbol,"1 = ").concat(t.symbol).concat(c)},e.handleSelectCurrency=function(r,n){var t=e.state,a=t.rates,c=t.exchangeValues,s=v.find((function(e){var r=e.name;return n===r}));"baseCurrency"===r&&e.subscribeForRates(s),e.setState(Object(u.a)({},r,s),(function(){var r=e.calcExchangeValues(a,c);e.setState({exchangeValues:r})}))},e.handleFocus=function(){e.setState({selectedCurrencyType:"quoteCurrency"})},e.handleBlur=function(){e.setState({selectedCurrencyType:"baseCurrency"})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.baseCurrency;this.ratesLoader=new f({updateInterval:3e4}),this.subscribeForRates(e)}},{key:"componentWillUnmount",value:function(){this.ratesLoader.unsubscribe()}},{key:"clearValues",value:function(){this.setState({exchangeValues:{baseCurrency:"",quoteCurrency:""}})}},{key:"render",value:function(){var e=this.state,r=e.baseCurrency,n=e.quoteCurrency,a=e.pockets,c=e.exchangeValues,s=e.rates,o=this.props.classes,u=function(e,r,n){return e.filter((function(e){return e.name!==n.name})).map((function(e){var t=Number(r[e.name]).toFixed(4),a="".concat(n.symbol,"1 = ").concat(e.symbol).concat(t);return{id:e.name,name:a}}))}(v,s,r);return Object(t.jsxs)("div",{className:o.appContainer,children:[Object(t.jsx)(_,{options:u,handleSelectCurrency:this.handleSelectCurrency,value:n.name}),Object(t.jsx)("div",{className:o.topPanel,children:Object(t.jsx)(G,{currencyType:"baseCurrency",baseCurrency:r,quoteCurrency:n,currenciesList:v,value:c.baseCurrency,pocketValue:a[r.name],handleValueChange:this.handleValueChange,handleSelectCurrency:this.handleSelectCurrency})}),Object(t.jsx)("div",{className:o.bottomPanel,children:Object(t.jsx)(G,{currencyType:"quoteCurrency",baseCurrency:r,quoteCurrency:n,currenciesList:v,value:c.quoteCurrency,pocketValue:a[n.name],handleValueChange:this.handleValueChange,handleSelectCurrency:this.handleSelectCurrency,currencyRateText:this.createInverseExchangeRateText(),handleFocus:this.handleFocus,handleBlur:this.handleBlur})}),Object(t.jsx)("div",{className:o.buttonContainer,children:Object(t.jsx)(J,{handleButtonClick:this.makeExchange})}),Object(t.jsx)(p.a,{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0})]})}}]),n}(a.Component),Q=Object(R.a)(M)(K);n(99);o.a.render(Object(t.jsx)(c.a.StrictMode,{children:Object(t.jsx)(Q,{})}),document.getElementById("root"))},99:function(e,r,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.3fb5a838.chunk.js.map